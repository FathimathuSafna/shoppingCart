<section>
    <div class="container ">
        <div class="row mt-4 ">
                            <div class="table-responsive">
            <table class="table mt-5 ">
                <thead>
                    <tr>
                        <th scope="col">Date</th>
                        <th>Address</th>
                        <th>Pincode</th>
                        <th>Mobile</th>
                        <th scope="col">Amount</th>
                        <th scope="col">Payment</th>
                        <th>Status</th>
                        <th colspan="2">Action</th> <!-- Split Action column into two for buttons -->
                    </tr>
                </thead>
                <tbody>
                    {{#each orders}}
                    <tr>
                        <td>{{this.date}}</td>
                        <td>{{this.deliveryDetails.address}}</td>
                        <td>{{this.deliveryDetails.pincode}}</td>
                        <td>{{this.deliveryDetails.mobile}}</td>
                        <td>{{this.totalAmount}}</td>
                        <td>{{this.paymentMethod}}</td>
                        <td>{{this.status}}</td>
                        <td>
                            <a href="/view-order-products/{{this._id}}" class="btn btn-primary btn-sm w-100">View Products</a>
                        </td>
                        <td>
                            <button class="btn btn-warning btn-sm w-100" onClick="cancelOrder('{{this._id}}')">Cancel Order</button>
                        </td>
                    </tr>
                    {{/each}}
                </tbody>
                
            </table>
            </div>
        </div>
    </div>
</section>

<!-- JavaScript function remains the same -->

<script>
    function cancelOrder(orderId) {
    if (!orderId) {
        console.error('No order ID provided.');
        return;
    }

   

    $.ajax({
        url: '/admin/cancel',
        method: 'POST',
        data: { orderId: orderId },
        success: function(response) {
            console.log('Response from server:', response);

            if (response.cancelled) {
                location.reload();
            } else {
            }
        },
        error: function(err) {
            console.error('Error cancelling order:', err);
        }
    });
}

</script>